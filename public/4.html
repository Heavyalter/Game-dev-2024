<body id="myBody" onload="{
  clearInterval(myTimer02);
  myTimer02 = setInterval(function(){
    let my02x = Math.floor((Math.random() * 20) - 9);
    let my02y = Math.floor((Math.random() * 20) - 9);
    document.getElementById('myImg02').style.left = parseInt(document.getElementById('myImg02').style.left) + my02x + 'px';
    document.getElementById('myImg02').style.top  = parseInt(document.getElementById('myImg02').style.top)  + my02y + 'px';
    myCheckHit();
  }, 50);
}" style="background-image: url('https://external-preview.redd.it/fhkU2h_KoqELvDHZPjgjaSnD_dJjnDVj3qE0-b7Ih3g.jpg?auto=webp&s=4dfd06d8ae8ead160b7679c77209263ade1c86fb'); background-repeat: repeat; background-size: 80%;">

<h1 align=center><font color=red>T4A08 Random Move by Fred</font></h1>

<!-- Show key press -->
<div id="myDiv01" style="font-size: 20px; color: red;">Press WASD to move</div>

<script>
// Global variables here
let myGlobalX = 0;
let myClock;
let myTimer01;
let myTimer02;

// Global functions here
function myHitOther(my1, my2) {
  left1 = parseInt(document.getElementById(my1).style.left);
  right1 = left1 + parseInt(document.getElementById(my1).style.width);
  top1 = parseInt(document.getElementById(my1).style.top);
  bottom1 = top1 + parseInt(document.getElementById(my1).style.height);
  left2 = parseInt(document.getElementById(my2).style.left);
  right2 = left2 + parseInt(document.getElementById(my2).style.width);
  top2 = parseInt(document.getElementById(my2).style.top);
  bottom2 = top2 + parseInt(document.getElementById(my2).style.height);

  if ((right1 >= left2) && (bottom1 >= top2) && (left1 <= right2) && (top1 <= bottom2)) {
    return true;
  }
  return false;
}

function myCheckHit() {
  if (myHitOther('myImg01', 'myImg02')) {
    // Reset the player's position and the enemy's position if they collide
    document.getElementById('myImg01').style.left = '20px';
    document.getElementById('myImg01').style.top = '190px';
    document.getElementById('myImg02').style.left = '350px'; // Reset enemy's position
    document.getElementById('myImg02').style.top = '190px'; // Reset enemy's position
    alert('You collided with the enemy! Game reset.');
  }

  // Check if the player has passed the enemy
  let playerLeft = parseInt(document.getElementById('myImg01').style.left);
  let enemyRight = parseInt(document.getElementById('myImg02').style.left) + 100; // 100 is the width of myImg02
  if (playerLeft > enemyRight) {
    alert('You passed the enemy! You win!');
    document.getElementById('myImg01').style.left = '20px';
    document.getElementById('myImg01').style.top = '190px';
  }

  // Check for window boundaries for player and enemy
  if (parseInt(document.getElementById('myImg01').style.left) > window.innerWidth - document.getElementById('myImg01').width) {
    document.getElementById('myImg01').style.left = '10px';
  }

  if (parseInt(document.getElementById('myImg02').style.left) > window.innerWidth - document.getElementById('myImg02').width) {
    document.getElementById('myImg02').style.left = (window.innerWidth / 2) + 'px';
  }
}

// Movement with WASD keys
function moveWithWASD(event) {
  let myKey = event.key;
  let character = document.getElementById('myImg01');
  let left = parseInt(character.style.left || '0');
  let top = parseInt(character.style.top || '0');

  // Move the character based on the key pressed
  if (myKey == 'w' || myKey == 'W') {
    character.style.top = (top - 10) + 'px'; // Move up
  } else if (myKey == 'a' || myKey == 'A') {
    character.style.left = (left - 10) + 'px'; // Move left
  } else if (myKey == 's' || myKey == 'S') {
    character.style.top = (top + 10) + 'px'; // Move down
  } else if (myKey == 'd' || myKey == 'D') {
    character.style.left = (left + 10) + 'px'; // Move right
  }

  // Update the key pressed info on the screen
  document.getElementById('myDiv01').innerHTML = 'You pressed: ' + myKey;

  // Check for collisions after movement
  myCheckHit();
}

// Move enemy slowly towards the player
function moveEnemyTowardsPlayer() {
  let enemy = document.getElementById('myImg02');
  let player = document.getElementById('myImg01');

  let enemyLeft = parseInt(enemy.style.left);
  let playerLeft = parseInt(player.style.left);
  let enemyTop = parseInt(enemy.style.top);
  let playerTop = parseInt(player.style.top);

  // Move the enemy towards the player
  if (enemyLeft < playerLeft) {
    enemy.style.left = (enemyLeft + 1) + 'px'; // Move enemy right towards player
  } else if (enemyLeft > playerLeft) {
    enemy.style.left = (enemyLeft - 1) + 'px'; // Move enemy left towards player
  }

  if (enemyTop < playerTop) {
    enemy.style.top = (enemyTop + 1) + 'px'; // Move enemy down towards player
  } else if (enemyTop > playerTop) {
    enemy.style.top = (enemyTop - 1) + 'px'; // Move enemy up towards player
  }

  // Check for collisions after enemy movement
  myCheckHit();
}

// Start the enemy movement when the page loads
setInterval(moveEnemyTowardsPlayer, 10);

// Simple inline keydown event handlers for WASD
window.onkeydown = moveWithWASD;

</script>

<!-- Buttons to move background -->
<input type=button value="Auto Background Left" onclick="{
  clearInterval(myClock);
  let myTemp = '100px 0px';
  myClock = setInterval(function(){
      myGlobalX -= 5;
      myTemp =  myGlobalX + 'px 0px';
      document.getElementById('myBody').style.backgroundPosition = myTemp;
  }, 100);
}">

<input type=button value="Right" onclick="{
  document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
  myCheckHit();
}">

<input type=button value="Down" onclick="{
  document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px';
  myCheckHit();
}">

<input type=button value="Auto Right" onclick="{
  clearInterval(myTimer01);
  myTimer01 = setInterval(function(){
     document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
     myCheckHit();
  }, 50);
}"><br><br>

<!-- Images -->
<img id="myImg01" src="myImgNew.jpg" title="myImg01" style="position:absolute; width:100px; height:80px; left: 50px; top:190px;">
<img id="myImg02" src="myImgNew.jpg" title="myImg02" style="position:absolute; width:100px; height:80px; left:350px; top:190px;">
<img id="myImg03" src="myImgNew.jpg" title="myImg03" style="position:absolute; width:100px; height:80px; left:500px; top:190px;">
<img id="myImg04" src="myImgNew.jpg" title="myImg04" style="position:absolute; width:100px; height:80px; left:500px; top:400px;">

</body>
